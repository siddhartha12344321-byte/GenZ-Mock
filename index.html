<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gen-Z Mocks | SuperKalam Edition</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';</script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <script src="js/supabase-config.js"></script>
    <script src="js/admin-data.js"></script>
    <script src="js/pdf-extractor.js"></script>
    <script src="js/ai-extractor.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@500&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        /* BASE & ANIMATIONS */
        body { font-family: 'Inter', sans-serif; background: #0f172a; color: #f8fafc; }
        .glass-panel { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
        
        /* SCROLLBAR */
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #1e293b; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #475569; border-radius: 4px; }

        /* OLIVEBOARD EXAM THEME */
        .ob-theme { font-family: 'Roboto', sans-serif; background-color: #e8e8e8; color: #333; height: 100vh; }
        .ob-header { background: linear-gradient(to bottom, #4a9fd4 0%, #2d7bb8 100%); color: white; }
        .ob-btn { background: #5cb85c; color: white; border: 1px solid #4cae4c; }
        .ob-btn:hover { background: #449d44; }
        .ob-palette-item { width: 34px; height: 34px; display: flex; align-items: center; justify-content: center; border-radius: 4px; border: 1px solid #ccc; cursor: pointer; font-size: 13px; font-weight: 600; background: #fff; }
        .pal-answered { background-color: #5cb85c; color: white; border-color: #4cae4c; }
        .pal-marked { background-color: #f0ad4e; color: white; border-color: #eea236; }
        .pal-not-visited { background-color: #e8e8e8; color: #333; }
        .pal-current { border: 2px solid #337ab7; box-shadow: 0 0 0 2px rgba(51, 122, 183, 0.3); }
        
        /* SUPERKALAM DASHBOARD THEME (Light Mode Override) */
        .sk-theme { background-color: #f9fafb; color: #1f2937; height: 100vh; display: flex; }
        .sk-sidebar { background: white; border-right: 1px solid #e5e7eb; }
        
        /* Loading Animation */
        .spinner { border: 3px solid rgba(255,255,255,0.3); border-top: 3px solid #3b82f6; border-radius: 50%; width: 24px; height: 24px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- AUTH & DATA LOGIC ---
        const ADMIN_PASS = "genz2024admin"; // Admin Password

        // --- ICONS ---
        const Icons = {
            User: () => <svg width="24" height="24" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>,
            Lock: () => <svg width="24" height="24" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>,
            Rocket: () => <svg width="24" height="24" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"></path><path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"></path><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"></path><path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"></path></svg>
        };

        // --- VIEW 1: LANDING PAGE ---
        const LandingPage = ({ onUserLogin, onAdminLogin }) => {
            const [key, setKey] = useState('');
            const [pass, setPass] = useState('');
            const [mode, setMode] = useState('selection'); // selection, user, admin

            const handleUserSubmit = (e) => {
                e.preventDefault();
                // Use adminData from your file to validate
                const keys = window.adminData ? window.adminData.getAllKeys() : [];
                const isValid = keys.some(k => k.key === key && k.is_active) || key === "DEMO-1234"; // Backdoor for testing
                
                if (isValid) {
                    localStorage.setItem('user_session_key', key);
                    onUserLogin(key);
                } else {
                    alert("‚ùå Invalid Access Key! Ask Admin for a key.");
                }
            };

            const handleAdminSubmit = (e) => {
                e.preventDefault();
                if (pass === ADMIN_PASS) {
                    onAdminLogin();
                } else {
                    alert("‚ùå Access Denied!");
                }
            };

            return (
                <div className="min-h-screen flex items-center justify-center relative overflow-hidden bg-slate-900 text-white">
                    <div className="absolute inset-0 overflow-hidden pointer-events-none">
                        <div className="absolute -top-[20%] -left-[10%] w-[50%] h-[50%] bg-blue-600/20 rounded-full blur-[100px]"></div>
                    </div>

                    <div className="relative z-10 w-full max-w-md p-8 glass-panel rounded-2xl border border-slate-700">
                        <div className="text-center mb-10">
                            <h1 className="text-4xl font-bold mb-2 flex items-center justify-center gap-3">
                                <span>üöÄ</span> Gen<span className="text-blue-500">Z</span>
                            </h1>
                            <p className="text-blue-200 text-sm tracking-wide">Mock Test Ecosystem</p>
                        </div>

                        {mode === 'selection' && (
                            <div className="space-y-4">
                                <button onClick={() => setMode('user')} className="w-full p-4 bg-slate-800 hover:bg-slate-700 rounded-xl transition-all border border-slate-600 flex items-center gap-4">
                                    <div className="bg-blue-500/20 p-3 rounded-full text-blue-400"><Icons.User /></div>
                                    <div className="text-left"><h3 className="font-bold">Student Login</h3><p className="text-xs text-slate-400">Enter Access Key</p></div>
                                </button>
                                <button onClick={() => setMode('admin')} className="w-full p-4 bg-slate-800 hover:bg-slate-700 rounded-xl transition-all border border-slate-600 flex items-center gap-4">
                                    <div className="bg-purple-500/20 p-3 rounded-full text-purple-400"><Icons.Lock /></div>
                                    <div className="text-left"><h3 className="font-bold">Admin Portal</h3><p className="text-xs text-slate-400">Manage Tests</p></div>
                                </button>
                            </div>
                        )}

                        {mode === 'user' && (
                            <form onSubmit={handleUserSubmit} className="space-y-4">
                                <h3 className="font-bold text-center mb-4">Student Access</h3>
                                <input type="text" value={key} onChange={(e) => setKey(e.target.value.toUpperCase())} placeholder="ENTER KEY (e.g. DEMO-1234)" className="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-center tracking-widest text-white focus:border-blue-500 outline-none" />
                                <button type="submit" className="w-full bg-blue-600 hover:bg-blue-500 p-3 rounded-lg font-bold">Login</button>
                                <button type="button" onClick={() => setMode('selection')} className="w-full text-xs text-slate-400 hover:text-white">Back</button>
                            </form>
                        )}

                        {mode === 'admin' && (
                            <form onSubmit={handleAdminSubmit} className="space-y-4">
                                <h3 className="font-bold text-center mb-4">Admin Access</h3>
                                <input type="password" value={pass} onChange={(e) => setPass(e.target.value)} placeholder="Password" className="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-center text-white focus:border-purple-500 outline-none" />
                                <button type="submit" className="w-full bg-purple-600 hover:bg-purple-500 p-3 rounded-lg font-bold">Login</button>
                                <button type="button" onClick={() => setMode('selection')} className="w-full text-xs text-slate-400 hover:text-white">Back</button>
                            </form>
                        )}
                    </div>
                </div>
            );
        };

        // --- VIEW 2: EXAM INTERFACE (Linked to admin-data.js) ---
        const ExamInterface = ({ test, onExit }) => {
            const [questions, setQuestions] = useState([]);
            const [currentQ, setCurrentQ] = useState(0);
            const [answers, setAnswers] = useState({});
            const [timeLeft, setTimeLeft] = useState((test.time_limit || 60) * 60);

            useEffect(() => {
                // Fetch questions using YOUR admin-data.js logic
                if (window.adminData) {
                    const qs = window.adminData.getQuestionsByTestId(test.id);
                    setQuestions(qs);
                }
            }, [test]);

            useEffect(() => {
                const timer = setInterval(() => setTimeLeft(t => t > 0 ? t - 1 : 0), 1000);
                return () => clearInterval(timer);
            }, []);

            const formatTime = (s) => {
                const m = Math.floor(s / 60).toString().padStart(2,'0');
                const sec = (s % 60).toString().padStart(2,'0');
                return `${m}:${sec}`;
            };

            const submitTest = () => {
                let score = 0;
                questions.forEach((q, i) => {
                    if (answers[i] === q.correct_option) score += parseFloat(test.mark_correct || 2);
                    else if (answers[i]) score -= parseFloat(test.mark_wrong || 0.66); // Simple negative marking logic
                });
                
                // Save attempt (Mock saving to localstorage history)
                const history = JSON.parse(localStorage.getItem('user_history') || '[]');
                history.push({
                    testName: test.name_en,
                    score: score.toFixed(2),
                    date: new Date().toISOString(),
                    totalQs: questions.length
                });
                localStorage.setItem('user_history', JSON.stringify(history));

                alert(`Test Submitted!\nYour Score: ${score.toFixed(2)}`);
                onExit();
            };

            if (questions.length === 0) return <div className="h-screen flex items-center justify-center bg-white text-black">Loading Questions... (Ensure you added questions in Admin)</div>;

            const q = questions[currentQ];

            return (
                <div className="ob-theme flex flex-col">
                    <div className="ob-header h-14 flex items-center justify-between px-6 shrink-0 shadow-md">
                        <div className="font-bold text-lg">{test.name_en}</div>
                        <div className="flex items-center gap-4">
                            <div className="bg-white/20 px-3 py-1 rounded font-mono font-bold">{formatTime(timeLeft)}</div>
                            <button onClick={submitTest} className="bg-green-600 hover:bg-green-700 text-white px-4 py-1 rounded font-bold text-sm">SUBMIT</button>
                        </div>
                    </div>

                    <div className="flex flex-1 overflow-hidden p-2 gap-2">
                        <div className="flex-1 flex flex-col bg-white border border-gray-300 rounded shadow-sm">
                            <div className="bg-gray-100 p-3 border-b font-bold flex justify-between text-gray-700">
                                <span>Question {currentQ + 1}</span>
                                <span className="text-xs font-normal text-gray-500">Marks: +2.0 / -0.66</span>
                            </div>
                            <div className="flex-1 p-6 overflow-y-auto">
                                <p className="text-lg text-gray-800 mb-6">{q.question_text_en}</p>
                                <div className="space-y-3">
                                    {['a','b','c','d'].map(opt => (
                                        <label key={opt} className={`flex items-start gap-3 p-3 border rounded cursor-pointer hover:bg-blue-50 ${answers[currentQ] === opt ? 'bg-blue-50 border-blue-500' : ''}`}>
                                            <input type="radio" name={`q${currentQ}`} checked={answers[currentQ] === opt} onChange={() => setAnswers({...answers, [currentQ]: opt})} className="mt-1" />
                                            <span className="text-gray-700">{q[`option_${opt}_en`]}</span>
                                        </label>
                                    ))}
                                </div>
                            </div>
                            <div className="p-3 bg-gray-50 border-t flex justify-between">
                                <button className="px-4 py-2 bg-white border rounded text-gray-700" onClick={() => {
                                    const n = {...answers}; delete n[currentQ]; setAnswers(n);
                                }}>Clear</button>
                                <button className="ob-btn px-6 py-2 rounded font-bold" onClick={() => setCurrentQ(Math.min(currentQ + 1, questions.length - 1))}>Save & Next</button>
                            </div>
                        </div>

                        <div className="w-72 bg-white border border-gray-300 rounded flex flex-col shadow-sm shrink-0">
                            <div className="p-3 bg-gray-100 border-b font-bold text-gray-700">Question Palette</div>
                            <div className="flex-1 overflow-y-auto p-3">
                                <div className="grid grid-cols-5 gap-2">
                                    {questions.map((_, i) => (
                                        <div key={i} onClick={() => setCurrentQ(i)} className={`ob-palette-item ${answers[i] ? 'pal-answered' : i === currentQ ? 'pal-current' : 'pal-not-visited'}`}>
                                            {i+1}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- VIEW 3: SUPERKALAM DASHBOARD (Using Admin Data) ---
        const Dashboard = ({ onLogout, onStartExam }) => {
            const [activeTab, setActiveTab] = useState('my_tests');
            const [tests, setTests] = useState([]);
            
            // AI Chat State
            const [chatInput, setChatInput] = useState('');
            const [chatMessages, setChatMessages] = useState([{role: 'ai', content: "Hello! I am GenZ AI. Ask me anything about your preparation."}]);
            const [loadingChat, setLoadingChat] = useState(false);

            // Keys
            const GROQ_KEY = "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";

            useEffect(() => {
                if(window.adminData) {
                    setTests(window.adminData.getAllTests());
                }
            }, [activeTab]);

            // --- AI CHAT LOGIC ---
            const handleChat = async () => {
                if(!chatInput.trim()) return;
                const userMsg = {role: 'user', content: chatInput};
                setChatMessages(prev => [...prev, userMsg]);
                setChatInput('');
                setLoadingChat(true);

                try {
                    const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
                        method: "POST",
                        headers: { "Authorization": `Bearer ${GROQ_KEY}`, "Content-Type": "application/json" },
                        body: JSON.stringify({
                            model: "llama-3.3-70b-versatile",
                            messages: [{role: "system", content: "You are a helpful UPSC tutor."}, {role: "user", content: chatInput}]
                        })
                    });
                    const data = await response.json();
                    setChatMessages(prev => [...prev, {role: 'ai', content: data.choices[0].message.content}]);
                } catch(e) {
                    setChatMessages(prev => [...prev, {role: 'ai', content: "Error connecting to AI."}]);
                }
                setLoadingChat(false);
            };

            return (
                <div className="sk-theme font-sans">
                    <div className="sk-sidebar w-64 flex flex-col shrink-0 z-20 shadow-sm">
                        <div className="p-6 flex items-center gap-2">
                            <div className="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold">GZ</div>
                            <span className="font-bold text-xl text-gray-800">SuperKalam</span>
                        </div>
                        <div className="flex-1 px-4 py-4 space-y-1">
                            <button onClick={() => setActiveTab('ask')} className={`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium ${activeTab === 'ask' ? 'bg-blue-50 text-blue-600' : 'text-gray-600 hover:bg-gray-50'}`}><span>ü§ñ</span> Ask SuperKalam</button>
                            <button onClick={() => setActiveTab('my_tests')} className={`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium ${activeTab === 'my_tests' ? 'bg-blue-50 text-blue-600' : 'text-gray-600 hover:bg-gray-50'}`}><span>üìù</span> My Tests</button>
                            <button onClick={() => setActiveTab('progress')} className={`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium ${activeTab === 'progress' ? 'bg-blue-50 text-blue-600' : 'text-gray-600 hover:bg-gray-50'}`}><span>üìä</span> My Progress</button>
                        </div>
                        <div className="p-4 border-t">
                            <button onClick={onLogout} className="w-full text-red-500 text-sm font-bold">Logout</button>
                        </div>
                    </div>

                    <div className="flex-1 bg-gray-50 h-full overflow-hidden flex flex-col">
                        {activeTab === 'my_tests' && (
                            <div className="p-8">
                                <h1 className="text-2xl font-bold text-gray-800 mb-6">Available Mock Tests</h1>
                                <div className="space-y-3">
                                    {tests.length === 0 ? <p className="text-gray-500">No tests available.</p> : tests.map(t => (
                                        <div key={t.id} className="bg-white p-4 rounded-lg shadow-sm border flex justify-between items-center">
                                            <div>
                                                <div className="font-bold text-lg">{t.name_en}</div>
                                                <div className="text-sm text-gray-500">{t.total_questions || t.questions} Questions ‚Ä¢ {t.time_limit} Mins</div>
                                            </div>
                                            <button onClick={() => onStartExam(t)} className="bg-blue-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-blue-700">Attempt</button>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {activeTab === 'ask' && (
                            <div className="flex flex-col h-full">
                                <div className="flex-1 overflow-y-auto p-6 space-y-4">
                                    {chatMessages.map((m, i) => (
                                        <div key={i} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                            <div className={`max-w-[80%] p-4 rounded-xl ${m.role === 'user' ? 'bg-blue-600 text-white' : 'bg-white shadow border'}`}>
                                                <div dangerouslySetInnerHTML={{ __html: marked.parse(m.content) }} />
                                            </div>
                                        </div>
                                    ))}
                                    {loadingChat && <div className="text-gray-400 ml-4">Thinking...</div>}
                                </div>
                                <div className="p-4 bg-white border-t flex gap-2">
                                    <input value={chatInput} onChange={e=>setChatInput(e.target.value)} onKeyDown={e=>e.key==='Enter'&&handleChat()} className="flex-1 p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Ask anything..." />
                                    <button onClick={handleChat} className="bg-blue-600 text-white p-3 rounded-lg">Send</button>
                                </div>
                            </div>
                        )}

                        {activeTab === 'progress' && (
                            <div className="p-8">
                                <h1 className="text-2xl font-bold mb-6">Progress History</h1>
                                <div className="bg-white rounded-lg shadow-sm border overflow-hidden">
                                    {JSON.parse(localStorage.getItem('user_history') || '[]').map((h, i) => (
                                        <div key={i} className="p-4 border-b flex justify-between">
                                            <span>{h.testName}</span>
                                            <span className="font-bold text-blue-600">Score: {h.score}</span>
                                        </div>
                                    ))}
                                    {JSON.parse(localStorage.getItem('user_history') || '[]').length === 0 && <div className="p-4 text-gray-500">No attempts yet.</div>}
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // --- VIEW 4: ADMIN DASHBOARD (Using your logic) ---
        const AdminDashboard = ({ onLogout }) => {
            const [testName, setTestName] = useState('');
            const [subject, setSubject] = useState('Polity');
            const [qs, setQs] = useState(10);
            
            // AI Keys
            const GEMINI_KEY = "AIzaSyAje3aDrFfZsOEMw8mtTQSlpNlXXkO8Yi4";

            const handleCreateTest = () => {
                if(!window.adminData) return alert("Error: Admin Logic not loaded.");
                window.adminData.createTest({
                    name_en: testName,
                    subject: subject,
                    questions: parseInt(qs),
                    time: 20
                });
                alert("Test Created!");
                setTestName('');
            };

            const handlePDFUpload = async (e) => {
                const file = e.target.files[0];
                if (!file) return;
                
                alert("Processing PDF with Gemini... Please wait.");
                
                try {
                    // Use your AI Extractor Logic via window.aiExtractor
                    // NOTE: Ensure your ai-extractor.js sets window.aiExtractor
                    if(window.aiExtractor) {
                        window.aiExtractor.setApiKey(GEMINI_KEY); // Set key dynamically
                        const result = await window.aiExtractor.extractFromPDF(file); // This calls your PDF logic
                        
                        if(result.success) {
                            const newTest = window.adminData.importTestWithQuestions({
                                title_en: file.name,
                                subject: 'Imported',
                                questions: result.questions
                            });
                            alert(`Success! Imported ${result.questions.length} questions into "${newTest.name_en}"`);
                        } else {
                            alert("Extraction Failed: " + result.error);
                        }
                    } else {
                        alert("AI Extractor Module not loaded!");
                    }
                } catch(err) {
                    console.error(err);
                    alert("Error processing PDF");
                }
            };

            return (
                <div className="min-h-screen bg-slate-900 text-white font-sans flex">
                    <div className="w-64 bg-slate-800 border-r border-slate-700 p-6 flex flex-col">
                        <h2 className="text-2xl font-bold mb-8 text-blue-400">Admin Panel</h2>
                        <button onClick={onLogout} className="mt-auto text-red-400">Logout</button>
                    </div>
                    <div className="flex-1 p-8">
                        <h1 className="text-3xl font-bold mb-8">Manage Content</h1>
                        
                        <div className="grid grid-cols-2 gap-8">
                            <div className="bg-slate-800 p-6 rounded-xl border border-slate-700">
                                <h3 className="font-bold text-xl mb-4">Create Manual Test</h3>
                                <input value={testName} onChange={e=>setTestName(e.target.value)} className="w-full bg-slate-900 border border-slate-600 p-3 rounded mb-4 text-white" placeholder="Test Name" />
                                <button onClick={handleCreateTest} className="bg-blue-600 px-6 py-2 rounded font-bold hover:bg-blue-500 w-full">Create Empty Test</button>
                            </div>

                            <div className="bg-slate-800 p-6 rounded-xl border border-slate-700">
                                <h3 className="font-bold text-xl mb-4">Import from PDF (Gemini)</h3>
                                <div className="border-2 border-dashed border-slate-600 rounded-xl p-8 text-center hover:bg-slate-700 transition cursor-pointer relative">
                                    <input type="file" accept=".pdf" onChange={handlePDFUpload} className="absolute inset-0 w-full h-full opacity-0 cursor-pointer" />
                                    <p className="text-blue-300">Click to Upload PDF</p>
                                    <p className="text-xs text-slate-400 mt-2">AI will extract questions automatically</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // --- ROOT APP ---
        const App = () => {
            const [view, setView] = useState('landing');
            const [currentTest, setCurrentTest] = useState(null);

            useEffect(() => {
                const key = localStorage.getItem('user_session_key');
                if (key) setView('user-dash');
            }, []);

            const handleStartExam = (test) => {
                setCurrentTest(test);
                setView('exam');
            };

            return (
                <>
                    {view === 'landing' && <LandingPage onUserLogin={() => setView('user-dash')} onAdminLogin={() => setView('admin-dash')} />}
                    {view === 'user-dash' && <Dashboard onLogout={() => { localStorage.removeItem('user_session_key'); setView('landing'); }} onStartExam={handleStartExam} />}
                    {view === 'admin-dash' && <AdminDashboard onLogout={() => setView('landing')} />}
                    {view === 'exam' && currentTest && <ExamInterface test={currentTest} onExit={() => setView('user-dash')} />}
                </>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
